
var className = 'tiktok-downloader-icon';
var donwloadImgBlack = 'data:image/png;base64,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';
var donwloadImgWhite = 'data:image/png;base64,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';

var showList = document.querySelector('#tiktok-list > ul.list');
var fragment = document.createDocumentFragment();

var prevList = [];

var startTask = () =>{
// clear old
chrome.runtime && chrome.runtime.onMessage.addListener(
function(request, sender, sendResponse) {
    console.log(request);
    let allList = request.allList;
    if(request.type == 'list'){
        if(allList.length && allList.length !== prevList.length){
            renderList(allList)
            prevList = allList;
            bindClickEvent();
        }
        if(allList.length == 0){
            renderNone()
        }
        sendResponse({
            data: "Fine!Got data!"
        });
    }
});
}

function updateTips(){
    var query = { active: true, currentWindow: true };
    function callback(tabs) {
        let inTiktok = /tiktok\.com/.test(tabs[0].url);
        if(!inTiktok && !document.querySelector('#title p')){
            let p = document.createElement('p')
            p.innerHTML = 
            `Please visit <a target="_blank" href="https://www.tiktok.com/trending?lang=en">tiktok.com</a>
            to download your favorite video!
            `;
            `
            <p style="color:red;font-size:18px;">*Duo to the restriction of Tiktok,<br />
            you can now click download icon <img style="height:20px" src="${donwloadImgBlack}"/>
            and save videos in that new tab!</p>
            `
            document.querySelector('#title') && document.querySelector('#title').appendChild(p);
        }else{
            document.querySelector('#title p') && document.querySelector('#title p').remove();
        }
    }
    chrome && chrome.tabs && chrome.tabs.query(query, callback);
}


function renderList(list){
    let content = ``;
    list.forEach((li,idx)=>{
        content += `<li><a target="_blank" title='click me to download!' href="${li}" download="${idx+1}.mp4">${idx+1}.mp4</a></li>`
    })
    showList && (showList.innerHTML = content)
}
function renderNone(){
    showList && (showList.innerHTML = 'Oooops, no video found...')
}
function bindClickEvent(){
    let links = document.querySelectorAll('#tiktok-list > ul.list a');
    links.forEach(link=>{
        link.addEventListener('click',(e)=>{
            e.preventDefault();
            e.stopPropagation();
            download(link.href)
        })
    })
}

// startTask()
updateTips()
// DOWNLOADER
const download = (url, name) => {
    window.open(url)
    // chrome.runtime.sendMessage({
    //     action: "download",
    //     url: url,
    //     filename: name || `${Date.now()}.mp4`,
    // });
};

